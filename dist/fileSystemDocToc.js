'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.configurator=exports.walk=exports.writeLine=exports.defaultConfig=void 0;var _fs=require('fs'),_path=require('path'),_path2=_interopRequireDefault(_path);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var defaultConfig=exports.defaultConfig={rootPath:__dirname,output:__dirname,order:!1},writeLine=exports.writeLine=function(a,b,c){var d=Array(a).fill('').join('  '),e=b.replace(/[/=?&]/g,'').replace(/[\s\r\n]/g,'-');return'function'==typeof c?c(d,b,e):d+'* ['+b+'](#'+e+')'},walk=exports.walk=function(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{toc:[],md:[]},e=4<arguments.length&&arguments[4]!==void 0?arguments[4]:1;return(0,_fs.readdirSync)(a).reduce(function(d,g){var f=a+'/'+g,h=c?g:c+'/'+g,i=(0,_fs.lstatSync)(f).isDirectory(),j=_path2.default.parse(g),k=j.ext,l=j.name,m=Array(e+1).fill('#').join('');if(i){var n={md:[].concat(_toConsumableArray(d.md),[writeLine(e,l,function(a,b,c){return m+' '+c})]),toc:[].concat(_toConsumableArray(d.toc),[writeLine(e,g)])};return walk(f,b,g,n,e+1)}if('.md'===k){var o=(0,_fs.readFileSync)(f,'utf8');return{toc:[].concat(_toConsumableArray(d.toc),[writeLine(e,l)]),md:[].concat(_toConsumableArray(d.md),[writeLine(e,l,function(a,b,c){return m+' '+c+'\n'+o+'\n'})])}}return d},d)},configurator=exports.configurator=function(a){var b=Object.assign({},defaultConfig,a),c=walk(b.rootPath,b.order),d=c.toc,e=c.md,f=d.join('\n'),g=e.join('\n');return{text:f+'\n\n'+g,config:b}};exports.default=function(a){var b=configurator(a),c=b.text,d=b.config;(0,_fs.writeFileSync)(d.output,c)};